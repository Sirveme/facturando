{% extends "base.html" %}

{% block title %}Dashboard - facturalo.pro{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', path='/css/dashboard.css') }}">
{% endblock %}

{% block body %}
<div class="dashboard-layout">
    <!-- Header -->
    <header class="header">
        <div class="header-left">
            <!-- Mobile Menu Toggle -->
            <button class="mobile-menu-toggle" id="mobile-menu-toggle">
                <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
                </svg>
            </button>
            
            <a href="/dashboard" class="header-logo">
                <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
                    <!-- ... SVG logo ... -->
                </svg>
                <span>facturalo.pro</span>
            </a>
        </div>
        
        <div class="header-right">
            <!-- Theme Toggle -->
            <button class="theme-toggle" id="theme-toggle" aria-label="Cambiar tema">
                <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/>
                </svg>
            </button>
            
            <!-- User Menu -->
            <div class="header-user">
                <div class="avatar">
                    <span>{{ user_ruc[:2] }}</span>
                </div>
                <div class="header-user-info">
                    <div class="header-user-name">Mi Empresa</div>
                    <div class="header-user-role">RUC {{ user_ruc }}</div>
                </div>
                <svg width="16" height="16" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"/>
                </svg>
            </div>
        </div>
    </header>
    
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
        <nav class="sidebar-nav">
            <div class="sidebar-section">
                <a href="/dashboard" class="sidebar-link {% if request.url.path == '/dashboard' %}active{% endif %}">
                    <span class="sidebar-link-icon">üìä</span>
                    <span>Dashboard</span>
                </a>
                <a href="/comprobantes" class="sidebar-link {% if '/comprobantes' in request.url.path and 'emitir' not in request.url.path and 'nota' not in request.url.path %}active{% endif %}">
                    <span class="sidebar-link-icon">üìÑ</span>
                    <span>Comprobantes</span>
                </a>
                <a href="/comprobantes/emitir" class="sidebar-link {% if request.url.path == '/comprobantes/emitir' %}active{% endif %}">
                    <span class="sidebar-link-icon">‚ûï</span>
                    <span>Emitir</span>
                </a>
                <a href="/productos" class="sidebar-link {% if '/productos' in request.url.path %}active{% endif %}">
                    <span class="sidebar-link-icon">üì¶</span>
                    <span>Productos</span>
                </a>
                <a href="/clientes" class="sidebar-link {% if '/clientes' in request.url.path %}active{% endif %}">
                    <span class="sidebar-link-icon">üë•</span>
                    <span>Clientes</span>
                </a>
                <a href="/reportes" class="sidebar-link {% if '/reportes' in request.url.path %}active{% endif %}">
                    <span class="sidebar-link-icon">üìà</span>
                    <span>Reportes</span>
                </a>
                <a href="/configuracion" class="sidebar-link {% if '/configuracion' in request.url.path %}active{% endif %}">
                    <span class="sidebar-link-icon">‚öôÔ∏è</span>
                    <span>Configuraci√≥n</span>
                </a>
            </div>
            <div class="sidebar-section" style="margin-top: auto; border-top: 1px solid var(--border-color); padding-top: var(--space-4);">
                <a href="/logout" class="sidebar-link">
                    <span class="sidebar-link-icon">üö™</span>
                    <span>Cerrar Sesi√≥n</span>
                </a>
            </div>
        </nav>
    </aside>

    <!-- Mobile Overlay -->
    <div class="mobile-overlay" id="mobile-overlay"></div>
    
    <!-- Main Content -->
    <main class="main">
        <div class="page-header">
            <h1 class="page-title">Dashboard</h1>
            <p class="page-description">Resumen de tu actividad de facturaci√≥n</p>
        </div>
        
        <!-- Stats Cards -->
        <div class="grid grid-cols-4 mb-8">
            <div class="stat-card">
                <div class="stat-card-header">
                    <span class="stat-card-title">Facturado Hoy</span>
                    <div class="stat-card-icon primary">
                        <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                    </div>
                </div>
                <div class="stat-card-value">S/ 1,250.00</div>
                <div class="stat-card-change positive">
                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12 7a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0V8.414l-4.293 4.293a1 1 0 01-1.414 0L8 10.414l-4.293 4.293a1 1 0 01-1.414-1.414l5-5a1 1 0 011.414 0L11 10.586 14.586 7H12z" clip-rule="evenodd"/>
                    </svg>
                    <span>+12% vs ayer</span>
                </div>
            </div>
            
            <div class="stat-card">
                <div class="stat-card-header">
                    <span class="stat-card-title">Comprobantes Emitidos</span>
                    <div class="stat-card-icon success">
                        <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                        </svg>
                    </div>
                </div>
                <div class="stat-card-value">15</div>
                <div class="stat-card-change positive">
                    <span>Hoy</span>
                </div>
            </div>
            
            <div class="stat-card">
                <div class="stat-card-header">
                    <span class="stat-card-title">Tasa de Aceptaci√≥n</span>
                    <div class="stat-card-icon success">
                        <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                    </div>
                </div>
                <div class="stat-card-value">98.5%</div>
                <div class="stat-card-change positive">
                    <span>√öltimos 30 d√≠as</span>
                </div>
            </div>
            
            <div class="stat-card">
                <div class="stat-card-header">
                    <span class="stat-card-title">Pendientes</span>
                    <div class="stat-card-icon warning">
                        <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                    </div>
                </div>
                <div class="stat-card-value">3</div>
                <div class="stat-card-change">
                    <span>En proceso</span>
                </div>
            </div>
        </div>
        
        <!-- Recent Comprobantes -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">√öltimos Comprobantes</h2>
                <div class="flex gap-2">
                    <button class="btn btn-ghost btn-sm">
                        Filtros
                        <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"/>
                        </svg>
                    </button>
                    <a href="/comprobantes" class="btn btn-primary btn-sm">
                        Ver todos
                        <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                        </svg>
                    </a>
                </div>
            </div>
            <div class="table-container">
                <table class="table table-dense">
                    <thead>
                        <tr>
                            <th style="width: 25%;">Comprobante</th>
                            <th style="width: 35%;">Cliente</th>
                            <th style="width: 20%;" class="text-right">Monto</th>
                            <th style="width: 12%;">Estado</th>
                            <th style="width: 8%;"></th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Item 1 - 2 filas -->
                        <tr class="table-row-main">
                            <td>
                                <div class="comprobante-cell">
                                    <span class="comprobante-serie">F001-00035</span>
                                    <span class="comprobante-date">23 Ene, 14:30</span>
                                </div>
                            </td>
                            <td>
                                <div class="cliente-cell">
                                    <span class="cliente-name">COMERCIAL IQUITOS SAC</span>
                                    <span class="cliente-ruc">RUC 20123456789</span>
                                </div>
                            </td>
                            <td class="text-right">
                                <div class="monto-cell">
                                    <span class="monto-total">S/ 1,380.00</span>
                                    <span class="monto-detalle">Base: S/ 1,169.49 + IGV</span>
                                </div>
                            </td>
                            <td>
                                <span class="badge badge-success">
                                    <svg width="12" height="12" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                                    </svg>
                                    Aceptado
                                </span>
                            </td>
                            <td>
                                <div class="table-actions">
                                    <button class="btn-icon-sm" title="Ver detalle">
                                        <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                                        </svg>
                                    </button>
                                    <button class="btn-icon-sm" title="Descargar">
                                        <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/>
                                        </svg>
                                    </button>
                                </div>
                            </td>
                        </tr>
                        
                        <!-- Item 2 -->
                        <tr class="table-row-main">
                            <td>
                                <div class="comprobante-cell">
                                    <span class="comprobante-serie">F001-00034</span>
                                    <span class="comprobante-date">23 Ene, 11:15</span>
                                </div>
                            </td>
                            <td>
                                <div class="cliente-cell">
                                    <span class="cliente-name">DISTRIBUIDORA LA SELVA EIRL</span>
                                    <span class="cliente-ruc">RUC 20987654321</span>
                                </div>
                            </td>
                            <td class="text-right">
                                <div class="monto-cell">
                                    <span class="monto-total">S/ 2,560.00</span>
                                    <span class="monto-detalle">Base: S/ 2,169.49 + IGV</span>
                                </div>
                            </td>
                            <td>
                                <span class="badge badge-success">
                                    <svg width="12" height="12" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                                    </svg>
                                    Aceptado
                                </span>
                            </td>
                            <td>
                                <div class="table-actions">
                                    <button class="btn-icon-sm" title="Ver detalle">
                                        <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                                        </svg>
                                    </button>
                                    <button class="btn-icon-sm" title="Descargar">
                                        <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/>
                                        </svg>
                                    </button>
                                </div>
                            </td>
                        </tr>
                        
                        <!-- Item 3 - Pendiente -->
                        <tr class="table-row-main">
                            <td>
                                <div class="comprobante-cell">
                                    <span class="comprobante-serie">B001-00156</span>
                                    <span class="comprobante-date">23 Ene, 09:45</span>
                                </div>
                            </td>
                            <td>
                                <div class="cliente-cell">
                                    <span class="cliente-name">JUAN CARLOS TORRES VELA</span>
                                    <span class="cliente-ruc">DNI 45678912</span>
                                </div>
                            </td>
                            <td class="text-right">
                                <div class="monto-cell">
                                    <span class="monto-total">S/ 180.00</span>
                                    <span class="monto-detalle">Base: S/ 152.54 + IGV</span>
                                </div>
                            </td>
                            <td>
                                <span class="badge badge-warning">
                                    <svg width="12" height="12" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                    </svg>
                                    Enviando
                                </span>
                            </td>
                            <td>
                                <div class="table-actions">
                                    <button class="btn-icon-sm" title="Ver detalle">
                                        <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                                        </svg>
                                    </button>
                                    <button class="btn-icon-sm" title="Reenviar">
                                        <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
                                        </svg>
                                    </button>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </main>
</div>
{% endblock %}

{% block extra_js %}

{% endblock %}